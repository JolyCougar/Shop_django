{% extends 'shop/include/base.html' %}
{% load static %}


{% block content %}

<div class="product-page container">
    <!-- Галерея миниатюр -->
    <div class="product-thumbnails">
        {% for image in product.get_all_images %}
        <img
            src="{{ image.url }}"
            alt="{{ product.name }} thumbnail"
            class="thumbnail {% if image.is_preview %}is-preview{% endif %}"
            width="100"
            height="100"
        />
        {% endfor %}
    </div>

    <!-- Главное изображение -->
    <div class="product-main-image">
        <img src="{{ product.preview.url }}" alt="{{ product.name }}" id="main-image" />
    </div>

    <!-- Детали продукта -->
    <div class="product-details">
        <h1>{{ product.name }}</h1>
        <ul>
            {{ product.attribute }}
        </ul>
        <div class="price-block">
            {% if product.old_price %}
            <p class="old-price">{{ product.old_price }} ₽</p>
            {% endif %}
            <p class="current-price">{{ product.price }} ₽</p>
        
            <button class="btn btn-add-to-cart">Добавить в корзину</button>
        
        </div>
    </div>
</div>

<!-- Описание продукта -->
<div class="description">
    <h2>Описание товара</h2>
    <p>{{ product.description }}</p>
</div>

<script>
    document.querySelectorAll('.thumbnail').forEach((thumbnail) => {
        thumbnail.addEventListener('click', function () {
            const mainImage = document.getElementById('main-image');
            mainImage.src = this.src;

            document
                .querySelectorAll('.thumbnail')
                .forEach((img) => img.classList.remove('is-preview'));

            this.classList.add('is-preview');
        });
    });
</script>

{% endblock %}

